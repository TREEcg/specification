<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>The TREE hypermedia specification</title>
  <meta content="w3c/CG-DRAFT" name="w3c-status">
  <link href="https://www.w3.org/StyleSheets/TR/2021/cg-draft" rel="stylesheet">
  <meta content="Bikeshed version 82ce88815, updated Thu Sep 7 16:33:55 2023 -0700" name="generator">
  <link href="https://w3id.org/tree/specification" rel="canonical">
  <link href="https://www.w3.org/2008/site/images/favicon.ico" rel="icon">
  <meta content="9f142c106d3926c864b7fcfa61cca91e432a40e3" name="document-revision">
<style>/* Boilerplate: style-autolinks */
.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}

@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}
</style>
<style>/* Boilerplate: style-colors */

/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
</style>
<style>/* Boilerplate: style-counters */
body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}
</style>
<style>/* Boilerplate: style-issues */
a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* Boilerplate: style-md-lists */
/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}
</style>
<style>/* Boilerplate: style-selflinks */

:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* Boilerplate: style-syntax-highlighting */

code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */


@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">The TREE hypermedia specification</h1>
   <p id="w3c-state"><a href="https://www.w3.org/standards/types#CG-DRAFT">Draft Community Group Report</a>, <time class="dt-updated" datetime="2024-04-03">3 April 2024</time></p>
   <details open>
    <summary>More details about this document</summary>
    <div data-fill-with="spec-metadata">
     <dl>
      <dt>This version:
      <dd><a class="u-url" href="https://w3id.org/tree/specification">https://w3id.org/tree/specification</a>
      <dt>Feedback:
      <dd><span><a href="mailto:public-treecg@w3.org?subject=%5BTREE%5D%20YOUR%20TOPIC%20HERE">public-treecg@w3.org</a> with subject line “<kbd>[TREE] <i data-lt>… message topic …</i></kbd>” (<a href="https://lists.w3.org/Archives/Public/public-treecg/" rel="discussion">archives</a>)</span>
      <dt>Issue Tracking:
      <dd><a href="https://github.com/treecg/specification/issues/">GitHub</a>
      <dt class="editor">Editor:
      <dd class="editor p-author h-card vcard"><a class="p-name fn u-url url" href="https://pietercolpaert.be">Pieter Colpaert</a>
     </dl>
    </div>
   </details>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> © 2024 <a href="https://www.w3.org/">World Wide Web Consortium</a>. <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup> <a href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>, <a href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and <a href="https://www.w3.org/copyright/software-license/" rel="license" title="W3C Software and Document License">permissive document license</a> rules apply. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>The TREE hypermedia specification enables data publishers and API developers to describe datasets as collections of entities, called “the members”.

    It then allows to create one or more views of this collection.
    A view allows organizing the members into multiple pages or nodes, and these nodes are interlinked using relations and/or search forms.
    This way, a user agent that can interpret the TREE hypermedia controls can find the most efficient way to the members of interest to them.</p>
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#overview"><span class="secno">1</span> <span class="content">Overview</span></a>
    <li><a href="#formalizations"><span class="secno">2</span> <span class="content">Definitions</span></a>
    <li><a href="#member-extraction-algorithm"><span class="secno">3</span> <span class="content">The member extraction algorithm</span></a>
    <li>
     <a href="#hypermedia"><span class="secno">4</span> <span class="content">Discovery and source selection</span></a>
     <ol class="toc">
      <li><a href="#interface-discovery"><span class="secno">4.1</span> <span class="content">Interface discovery</span></a>
      <li><a href="#multiple-views"><span class="secno">4.2</span> <span class="content">View discovery</span></a>
      <li><a href="#multiple-collections"><span class="secno">4.3</span> <span class="content">Dataset discovery</span></a>
     </ol>
    <li>
     <a href="#relations"><span class="secno">5</span> <span class="content">The tree:Relations</span></a>
     <ol class="toc">
      <li><a href="#traversing"><span class="secno">5.1</span> <span class="content">Traversing relations</span></a>
      <li><a href="#fallbacks"><span class="secno">5.2</span> <span class="content">Fallbacks</span></a>
      <li>
       <a href="#relationsubclasses"><span class="secno">5.3</span> <span class="content">Specific relations</span></a>
       <ol class="toc">
        <li><a href="#strings"><span class="secno">5.3.1</span> <span class="content">Comparing strings</span></a>
        <li><a href="#named-nodes"><span class="secno">5.3.2</span> <span class="content">Comparing named nodes</span></a>
        <li><a href="#geospatial"><span class="secno">5.3.3</span> <span class="content">Comparing geospatial features</span></a>
        <li><a href="#time"><span class="secno">5.3.4</span> <span class="content">Comparing time literals</span></a>
       </ol>
     </ol>
    <li>
     <a href="#searching"><span class="secno">6</span> <span class="content">Search forms</span></a>
     <ol class="toc">
      <li><a href="#xyztiles"><span class="secno">6.1</span> <span class="content">Geospatial XYZ tiles search form</span></a>
      <li><a href="#timesearch"><span class="secno">6.2</span> <span class="content">Searching through a list of objects ordered by time</span></a>
     </ol>
    <li><a href="#imports"><span class="secno">7</span> <span class="content">Imports</span></a>
    <li>
     <a href="#compatibility"><span class="secno">8</span> <span class="content">Compatibility</span></a>
     <ol class="toc">
      <li><a href="#dcat"><span class="secno">8.1</span> <span class="content">DCAT</span></a>
      <li><a href="#hydra"><span class="secno">8.2</span> <span class="content">Hydra</span></a>
      <li><a href="#activitystreams"><span class="secno">8.3</span> <span class="content">Activity Streams 2.0</span></a>
      <li><a href="#ldp"><span class="secno">8.4</span> <span class="content">LDP Containers</span></a>
      <li><a href="#shapetrees"><span class="secno">8.5</span> <span class="content">Shape trees</span></a>
     </ol>
    <li>
     <a href="#vocabulary"><span class="secno">9</span> <span class="content">Vocabulary</span></a>
     <ol class="toc">
      <li>
       <a href="#classes"><span class="secno">9.1</span> <span class="content">Classes</span></a>
       <ol class="toc">
        <li><a href="#collection"><span class="secno">9.1.1</span> <span class="content">tree:Collection</span></a>
        <li><a href="#Node"><span class="secno">9.1.2</span> <span class="content">tree:Node</span></a>
        <li><a href="#Relation"><span class="secno">9.1.3</span> <span class="content">tree:Relation</span></a>
        <li><a href="#ConditionalImport"><span class="secno">9.1.4</span> <span class="content">tree:ConditionalImport</span></a>
        <li><a href="#ViewDescription"><span class="secno">9.1.5</span> <span class="content">tree:ViewDescription</span></a>
       </ol>
      <li>
       <a href="#properties"><span class="secno">9.2</span> <span class="content">Properties</span></a>
       <ol class="toc">
        <li><a href="#relation"><span class="secno">9.2.1</span> <span class="content">tree:relation</span></a>
        <li><a href="#remainingItems"><span class="secno">9.2.2</span> <span class="content">tree:remainingItems</span></a>
        <li><a href="#node"><span class="secno">9.2.3</span> <span class="content">tree:node</span></a>
        <li><a href="#value"><span class="secno">9.2.4</span> <span class="content">tree:value</span></a>
        <li><a href="#path"><span class="secno">9.2.5</span> <span class="content">tree:path</span></a>
        <li><a href="#view"><span class="secno">9.2.6</span> <span class="content">tree:view</span></a>
        <li><a href="#search"><span class="secno">9.2.7</span> <span class="content">tree:search</span></a>
        <li><a href="#shape"><span class="secno">9.2.8</span> <span class="content">tree:shape</span></a>
        <li><a href="#member"><span class="secno">9.2.9</span> <span class="content">tree:member</span></a>
        <li><a href="#import"><span class="secno">9.2.10</span> <span class="content">tree:import</span></a>
        <li><a href="#conditionalImport"><span class="secno">9.2.11</span> <span class="content">tree:conditionalImport</span></a>
        <li><a href="#zoom"><span class="secno">9.2.12</span> <span class="content">tree:zoom</span></a>
        <li><a href="#longitudeTile"><span class="secno">9.2.13</span> <span class="content">tree:longitudeTile</span></a>
        <li><a href="#latitudeTile"><span class="secno">9.2.14</span> <span class="content">tree:latitudeTile</span></a>
        <li><a href="#timeQuery"><span class="secno">9.2.15</span> <span class="content">tree:timeQuery</span></a>
        <li><a href="#viewDescription"><span class="secno">9.2.16</span> <span class="content">tree:viewDescription</span></a>
       </ol>
     </ol>
    <li>
     <a href="#w3c-conformance"><span class="secno"></span> <span class="content">Conformance</span></a>
     <ol class="toc">
      <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content">Document conventions</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
     </ol>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="overview"><span class="secno">1. </span><span class="content">Overview</span><a class="self-link" href="#overview"></a></h2>
   <p><img alt="An overview of the TREE specification with the TREE collection, a reference to the first focus node of its members, and the relations to other nodes from the current node." src="https://docs.google.com/drawings/d/e/2PACX-1vTTCjBkBum1J4xgbg0oZJaD_H05dpZxhL6jrp1yzqoIsYw5EOa-7D24No_rfEyTipq1rLb-_tPTEYV0/pub?w=1093&amp;h=546"></p>
   <p>The TREE specification introduces these core concepts:</p>
   <ul>
    <li data-md>
     <p>a <code>tree:Collection</code> is a subclass of <code>dcat:Dataset</code> (<a data-link-type="biblio" href="#biblio-vocab-dcat-3" title="Data Catalog Vocabulary (DCAT) - Version 3">[vocab-dcat-3]</a>). The specialization being that it is a DCAT dataset a collection of members. It typically has these properties when described in a node:</p>
     <ul>
      <li data-md>
       <p><code>tree:member</code> points at the first focus node from which to retrieve and extract all quads of a member.</p>
      <li data-md>
       <p><code>tree:view</code> points to a <code>tree:Node</code> from which all members can be reached.</p>
      <li data-md>
       <p><code>tree:shape</code> indicates the <a data-link-type="biblio" href="#biblio-shacl" title="Shapes Constraint Language (SHACL)">[SHACL]</a> shape to which each member in the collection adheres.</p>
      <li data-md>
       <p><code>tree:viewDescription</code> links to a description of the view (a <code>tree:ViewDescription</code>). Multiple descriptions MAY be provided that MUST be combined.</p>
     </ul>
    <li data-md>
     <p>a <code>tree:Node</code>: is a page on which relations to other pages are described through the <code>tree:relation</code> predicate, and/or through which a next <code>tree:Node</code> can be found by using the <code>tree:search</code> form.</p>
    <li data-md>
     <p>a <code>tree:Relation</code> is a relation from one node to another. An extension of this class indicates a specific type of relation (e.g., a <code>tree:GreaterThanRelation</code>). A relation typically has these properties:</p>
     <ul>
      <li data-md>
       <p>a <code>tree:node</code> the URL of the other node</p>
      <li data-md>
       <p>a <code>tree:path</code> indicating to which of the members' properties this relation applies</p>
      <li data-md>
       <p>a <code>tree:value</code> indicating a value constraint on the members' values</p>
      <li data-md>
       <p>a <code>tree:remainingItems</code> defining how many members can be reached when following this relation</p>
     </ul>
    <li data-md>
     <p>a <code>tree:ViewDescription</code> is a subclass of <code>dcat:DataService</code> and serves a <code>tree:Collection</code>.</p>
     <ul>
      <li data-md>
       <p>a <code>tree:search</code> describes a search form that allows an agent to jump to a specific <code>tree:Node</code>.</p>
     </ul>
   </ul>
   <p>The first step when creating a TREE hypermedia interface is defining a collection of members:</p>
   <div class="example" id="example-27f53748">
    <a class="self-link" href="#example-27f53748"></a> 
<pre class="language-turtle highlight"><c- nn>ex</c-><c- p>:</c-><c- f>Collection1</c-> <c- b>a</c-> <c- nn>tree</c-><c- p>:</c-><c- f>Collection</c-><c- p>;</c->
            <c- nn>rdfs</c-><c- p>:</c-><c- f>label</c-> <c- s>"A Collection of subjects"</c-><c- o>@</c->en<c- p>;</c->
            <c- nn>tree</c-><c- p>:</c-><c- f>member</c-> <c- nn>ex</c-><c- p>:</c-><c- f>Subject1</c-><c- p>,</c-> <c- nn>ex</c-><c- p>:</c-><c- f>Subject2</c-> <c- p>.</c->

<c- nn>ex</c-><c- p>:</c-><c- f>Subject1</c-> <c- b>a</c-> <c- nn>ex</c-><c- p>:</c-><c- f>Subject</c-> <c- p>;</c->
            <c- nn>rdfs</c-><c- p>:</c-><c- f>label</c-> <c- s>"Subject 1"</c-> <c- p>;</c->
            <c- nn>ex</c-><c- p>:</c-><c- f>value</c-> <c- mi>1</c-> <c- p>.</c->

<c- nn>ex</c-><c- p>:</c-><c- f>Subject2</c-> <c- b>a</c-> <c- nn>ex</c-><c- p>:</c-><c- f>Subject</c-> <c- p>;</c->
            <c- nn>rdfs</c-><c- p>:</c-><c- f>label</c-> <c- s>"Subject 2"</c-> <c- p>;</c->
            <c- nn>ex</c-><c- p>:</c-><c- f>value</c-> <c- mi>2</c-> <c- p>.</c->
</pre>
   </div>
   <p>From the moment this collection of members grows too big for one page, a fragmentation needs to be created in which an initial set of member can be found on an entry node, and more members can be found by interpreting the TREE hypermedia controls. This is illustrated by the next example:</p>
   <div class="example" id="example-18a5dd5b">
    <a class="self-link" href="#example-18a5dd5b"></a> 
<pre class="language-turtle highlight">> HTTP GET <c- nn>https</c-><c- p>:</c->//example<c- p>.</c->org/Node<c- mi>1</c->

<c- nn>ex</c-><c- p>:</c-><c- f>Collection1</c-> <c- b>a</c-> <c- nn>tree</c-><c- p>:</c-><c- f>Collection</c-><c- p>;</c->
            <c- nn>tree</c-><c- p>:</c-><c- f>view</c-> <c- nn>ex</c-><c- p>:</c-><c- f>Node1</c-> <c- p>;</c->
            <c- nn>tree</c-><c- p>:</c-><c- f>member</c-> <c- nn>ex</c-><c- p>:</c-><c- f>Subject1</c-><c- p>,</c-> <c- nn>ex</c-><c- p>:</c-><c- f>Subject2</c-> <c- p>.</c->

<c- nn>ex</c-><c- p>:</c-><c- f>Node1</c-> <c- b>a</c-> <c- nn>tree</c-><c- p>:</c-><c- f>Node</c-> <c- p>;</c->
        <c- nn>tree</c-><c- p>:</c-><c- f>relation</c-> <c- nn>ex</c-><c- p>:</c-><c- f>R1</c-><c- p>,</c-><c- nn>ex</c-><c- p>:</c-><c- f>R2</c-> <c- p>;</c->
        <c- nn>tree</c-><c- p>:</c-><c- f>viewDescription</c-> <c- nn>ex</c-><c- p>:</c-><c- f>ViewDescription1</c-> <c- p>.</c->

<c- nn>ex</c-><c- p>:</c-><c- f>R1</c-> <c- b>a</c-> <c- nn>tree</c-><c- p>:</c-><c- f>GreaterThanOrEqualToRelation</c-> <c- p>;</c->
    <c- nn>tree</c-><c- p>:</c-><c- f>node</c-> <c- nn>ex</c-><c- p>:</c-><c- f>Node3</c-> <c- p>;</c-> <c- c># This is the URL of another page</c->
    <c- nn>tree</c-><c- p>:</c-><c- f>value</c-> <c- mi>3</c-><c- p>;</c->
    <c- nn>tree</c-><c- p>:</c-><c- f>path</c-> <c- nn>ex</c-><c- p>:</c-><c- f>value</c-> <c- p>.</c->

<c- nn>ex</c-><c- p>:</c-><c- f>R1</c-> <c- b>a</c-> <c- nn>tree</c-><c- p>:</c-><c- f>LessThanRelation</c-> <c- p>;</c-> <c- c># This is very useful for a client that is looking for a value 10 or greater</c->
    <c- nn>tree</c-><c- p>:</c-><c- f>node</c-> <c- nn>ex</c-><c- p>:</c-><c- f>Node3</c-> <c- p>;</c-> <c- c># This is the URL of another page</c->
    <c- nn>tree</c-><c- p>:</c-><c- f>value</c-> <c- mi>10</c-><c- p>;</c->
    <c- nn>tree</c-><c- p>:</c-><c- f>remainingItems</c-> <c- mi>7</c-> <c- p>;</c->
    <c- nn>tree</c-><c- p>:</c-><c- f>path</c-> <c- nn>ex</c-><c- p>:</c-><c- f>value</c-> <c- p>.</c->

<c- nn>ex</c-><c- p>:</c-><c- f>R2</c-> <c- b>a</c-> <c- nn>tree</c-><c- p>:</c-><c- f>GreaterThanOrEqualToRelation</c-> <c- p>;</c->
    <c- nn>tree</c-><c- p>:</c-><c- f>node</c-> <c- nn>ex</c-><c- p>:</c-><c- f>Node4</c-> <c- p>;</c-> <c- c># This is the URL of another page</c->
    <c- nn>tree</c-><c- p>:</c-><c- f>value</c-> <c- mi>10</c-><c- p>;</c->
    <c- nn>tree</c-><c- p>:</c-><c- f>remainingItems</c-> <c- mi>10</c-> <c- p>;</c->
    <c- nn>tree</c-><c- p>:</c-><c- f>path</c-> <c- nn>ex</c-><c- p>:</c-><c- f>value</c-> <c- p>.</c->

<c- nn>ex</c-><c- p>:</c-><c- f>Subject1</c-> <c- b>a</c-> <c- nn>ex</c-><c- p>:</c-><c- f>Subject</c-> <c- p>;</c->
            <c- nn>rdfs</c-><c- p>:</c-><c- f>label</c-> <c- s>"Subject 1"</c-> <c- p>;</c->
            <c- nn>ex</c-><c- p>:</c-><c- f>value</c-> <c- mi>1</c-> <c- p>.</c->

<c- nn>ex</c-><c- p>:</c-><c- f>Subject2</c-> <c- b>a</c-> <c- nn>ex</c-><c- p>:</c-><c- f>Subject</c-> <c- p>;</c->
            <c- nn>rdfs</c-><c- p>:</c-><c- f>label</c-> <c- s>"Subject 2"</c-> <c- p>;</c->
            <c- nn>ex</c-><c- p>:</c-><c- f>value</c-> <c- mi>2</c-> <c- p>.</c->
</pre>
   </div>
   <div class="informative">
     Thanks to the <a href="#member-extraction-algorithm">member extraction algorithm</a>, a data publisher can choose to define their members in different ways: 
    <ol>
     <li data-md>
      <p>As in the examples above: all quads with the object of the <code>tree:member</code> quads as a subject (and recursively the quads of their blank nodes) are by default included (see also <a data-link-type="biblio" href="#biblio-cbd" title="CBD - Concise Bounded Description">[CBD]</a>), except when they would explicitely not be included in case 3, when the shape would be closed.</p>
     <li data-md>
      <p>Out of band / in band:</p>
      <ul>
       <li data-md>
        <p>when no quads of a member have been found, the member will be dereferenced. This allows to publish the member on a separate page.</p>
       <li data-md>
        <p>part of the member can be maintained elsewhere when a shape is defined (see 3)</p>
      </ul>
     <li data-md>
      <p>By defining a more complex shape with <code>tree:shape</code>, also nested entities can be included in the member</p>
     <li data-md>
      <p>By putting the triples in a named graph of the object of <code>tree:member</code>, all these triples will be matched.</p>
    </ol>
   </div>
   <h2 class="heading settled" data-level="2" id="formalizations"><span class="secno">2. </span><span class="content">Definitions</span><a class="self-link" href="#formalizations"></a></h2>
   <p>A <code>tree:Collection</code> is a set of <code>tree:Member</code>s. The set of members MAY be empty.</p>
   <p>A <code>tree:Member</code> is a set of (at least one) quad(s) defined by the member extraction algorithm (next subsection).</p>
   <p>A <code>tree:Node</code> is a dereferenceable resource of <code>tree:Relation</code>s and a subset of (<code>⊆</code>) members of the collection. In a <code>tree:Node</code>, both the set of <code>tree:Relation</code>s as the subset of members MAY be empty. The same member MAY be contained in multiple nodes.</p>
   <p>A <code>tree:Relation</code> is a function denoting a conditional link to another <code>tree:Node</code>.</p>
   <p class="note" role="note"><span class="marker">Note:</span> The condition of multiple <code>tree:Relation</code>s to the same <code>tree:Node</code> MUST be combined with a logical AND.</p>
   <p>A View is a specific set of interlinked <code>tree:Node</code>s, that together contain all members in a collection. A specific view will adhere to a certain growth or tree balancing strategy. In one view, completeness MUST be guaranteed.</p>
   <p>A <code>tree:search</code> form is a IRI template, that when filled out with the right parameters becomes a <code>tree:Node</code> IRI, or when dereferenced will redirect to a <code>tree:Node</code> from which all members in the collection that adhere to the described comparator can be found.</p>
   <h2 class="heading settled" data-level="3" id="member-extraction-algorithm"><span class="secno">3. </span><span class="content">The member extraction algorithm</span><a class="self-link" href="#member-extraction-algorithm"></a></h2>
   <p>TREE uses the <a href="https://w3id.org/tree/specification/shape-templates">shape templates algorithm</a> to define the set of quads that are part of their members.
It uses the `sh:NodeShape` from the `tree:shape` property on the collection</p>
   <p class="note" role="note"><span class="marker">Note:</span> The way we process SHACL shapes into Shape Template is important to understand in order to know when an HTTP request will be triggered when designing SHACL shapes. A cardinality constraint not being exactly matched or a <code>sh:pattern</code> not being respected will not trigger an HTTP request, and instead just add the invalid quads to the Member. This is a design choice: we only define triggers for HTTP request from the SHACL shape to come to a complete set of quads describing the member the data publisher pointed at using <code>tree:member</code>.</p>
   <h2 class="heading settled" data-level="4" id="hypermedia"><span class="secno">4. </span><span class="content">Discovery and source selection</span><a class="self-link" href="#hypermedia"></a></h2>
   <p>TREE tackles discovery on three levels: i) interface discovery, ii) view discovery, and iii) dataset discovery.
Interface discovery discovers what collection the current page is part of, and discovers what the next possible HTTP requests are through relations and search forms.
One dataset can have multiple views that can be published across different servers, selecting one for a certain use case is part of the view discovery.
Dataset discovery is then selecting a <code>tree:Collection</code> of interest.</p>
   <h3 class="heading settled" data-level="4.1" id="interface-discovery"><span class="secno">4.1. </span><span class="content">Interface discovery</span><a class="self-link" href="#interface-discovery"></a></h3>
   <p>Interface discovery starts when a URL is provided to a specific <code>tree:Node</code>.
A node from which all members of a collection can be discovered (an “entry node”), can be found through a triple stating <code>ex:C1 tree:view ex:N1</code> with <code>ex:C1</code> being a <code>tree:Collection</code> and <code>ex:N1</code> being a <code>tree:Node</code>.</p>
   <p>When the current page is a <code>tree:Node</code>, there MUST be a property linking the current page URL to the URI of the <code>tree:Collection</code>. However, not from all <code>tree:Node</code>s all members can be reached, and therefore 2 other properties can be used: <code>void:subset</code>, or the inverse property, <code>dcterms:isPartOf</code>.</p>
   <p>Three properties MAY thus be used:</p>
   <ol>
    <li data-md>
     <p><code>ex:C1 tree:view &lt;> .</code><br>May be used <em>only</em> in the case when the entire <code>tree:Collection</code> can be found starting from the current node.</p>
    <li data-md>
     <p><code>ex:C1 void:subset &lt;> .</code><br>When the node is not a node from which all members can be found, but still is a subset of the collection that can be found.</p>
    <li data-md>
     <p><code>&lt;> dcterms:isPartOf ex:C1 .</code><br>The inverse property of 2.</p>
   </ol>
   <p>We refer to next chapters for traversing across multiple relations, or for using search forms.</p>
   <h3 class="heading settled" data-level="4.2" id="multiple-views"><span class="secno">4.2. </span><span class="content">View discovery</span><a class="self-link" href="#multiple-views"></a></h3>
   <p>Every node linked from <code>tree:view</code> MUST be an entry point to retrieve <strong>all</strong> members of the collection.
Multiple <code>tree:view</code> links MAY be provided.
If a TREE client wants to guarantee compleneteness, it picks one link and then traverses all relations.</p>
   <p class="note" role="note"><span class="marker">Note:</span> How a client picks the right view is use case specific. The <code>tree:ViewDescription</code>’s properties can help in that regards.</p>
   <p>In order to prioritize a specific view link, the relations and search forms in the entry nodes can be studied for their relation types, path or remaining items.
The class <code>tree:ViewDescription</code> indicates a specific TREE structure on a <code>tree:Collection</code>.
Through the property <code>tree:viewDescription</code> a <code>tree:Node</code> can link to an entity that describes the view, and can be reused in data portals as the <code>dcat:DataService</code>.</p>
   <div class="example" id="example-2557daa6">
    <a class="self-link" href="#example-2557daa6"></a> 
<pre class="language-turtle highlight"><c- c>## What can be found in a tree:Node</c->
<c- nn>ex</c-><c- p>:</c-><c- f>N1</c-> <c- b>a</c-> <c- nn>tree</c-><c- p>:</c-><c- f>Node</c-> <c- p>;</c->
  <c- nn>tree</c-><c- p>:</c-><c- f>viewDescription</c-> <c- nn>ex</c-><c- p>:</c-><c- f>View1</c-> <c- p>.</c->
  
<c- nn>ex</c-><c- p>:</c-><c- f>C1</c-> <c- b>a</c-> <c- nn>tree</c-><c- p>:</c-><c- f>Collection</c-> <c- p>;</c->
  <c- nn>tree</c-><c- p>:</c-><c- f>view</c-> <c- nn>ex</c-><c- p>:</c-><c- f>N1</c-> <c- p>.</c->

<c- c>## What can be found on a data portal</c->
<c- nn>ex</c-><c- p>:</c-><c- f>C1</c-> <c- b>a</c-> <c- nn>dcat</c-><c- p>:</c-><c- f>Dataset</c-> <c- p>.</c->
<c- nn>ex</c-><c- p>:</c-><c- f>View1</c-> <c- b>a</c-> <c- nn>tree</c-><c- p>:</c-><c- f>ViewDescription</c-><c- p>,</c-> <c- nn>dcat</c-><c- p>:</c-><c- f>DataService</c-> <c- p>;</c->
  <c- nn>dcat</c-><c- p>:</c-><c- f>endpointURL</c-> <c- nn>ex</c-><c- p>:</c-><c- f>N1</c-> <c- p>;</c-> <c- c># The entry point that can be advertised in a data portal</c->
  <c- nn>dcat</c-><c- p>:</c-><c- f>servesDataset</c-> <c- nn>ex</c-><c- p>:</c-><c- f>C1</c-> <c- p>.</c->
</pre>
   </div>
   <p>When there is no <code>tree:viewDescription</code> property in this page, a client either already discovered the description of this view in an earlier <code>tree:Node</code>, either the current <code>tree:Node</code> is implicitly the ViewDescription. Therefore, when the property path <code>tree:view → tree:viewDescription</code> does not yield a result, the view properties MUST be extracted from the object of the <code>tree:view</code> triple.
A <code>tree:Node</code> can also be double typed as the <code>tree:ViewDescription</code>. A client must thus check for ViewDescriptions on both the current node without the <code>tree:viewDescription</code> qualification, as on the current node with the <code>tree:viewDescription</code> link.</p>
   <h3 class="heading settled" data-level="4.3" id="multiple-collections"><span class="secno">4.3. </span><span class="content">Dataset discovery</span><a class="self-link" href="#multiple-collections"></a></h3>
   <p>When multiple collections are found by a client, it can choose to prune the collections based on the <code>tree:shape</code> property.
Therefore a data publisher SHOULD annotate a <code>tree:Collection</code> instance with a SHACL shape.
The <code>tree:shape</code> points to a SHACL description of the shape (<code>sh:NodeShape</code>).</p>
   <p class="note" role="note"><span class="marker">Note:</span> the shape can be a blank node, or a named node on which you should follow your nose when it is defined at a different HTTP URL.</p>
   <p class="note" role="note"><span class="marker">Note:</span> For compatibility with the <a href="https://solidproject.org/TR/">Solid specifications</a>, a ShEx shape may also be given (see the chapter on compatibility bellow).</p>
   <h2 class="heading settled" data-level="5" id="relations"><span class="secno">5. </span><span class="content">The tree:Relations</span><a class="self-link" href="#relations"></a></h2>
   <p>The initial configuration of the <code>tree:Collection</code> and the description of the view is always provided when the view has been discovered, either in a separate document describing the view, either in the entry node itself. The configuration MUST be reused on any subsequent <code>tree:Node</code>.</p>
   <h3 class="heading settled" data-level="5.1" id="traversing"><span class="secno">5.1. </span><span class="content">Traversing relations</span><a class="self-link" href="#traversing"></a></h3>
   <p>A <code>tree:Node</code> element MAY have one or more <code>tree:relation</code> properties. A relation is an entity of the type <code>tree:Relation</code>, and MAY have a more specific type. A <code>tree:Relation</code> MUST have one <code>tree:node</code> object of the type <code>tree:Node</code>. By default, all nodes need to be followed, unless the client is able to select this relation for pruning (see next section).</p>
   <p>The <code>tree:Relation</code>’s <code>tree:value</code> SHOULD be set. The object of <code>tree:value</code> SHOULD be accompanied by a data type when it is a literal value.</p>
   <p>Every <code>tree:Relation</code> SHOULD have a <code>tree:path</code>, indicating the path from the member to the object on which the <code>tree:Relation</code> applies. For the different ways to express or handle a <code>tree:path</code>, we refer to <a href="https://www.w3.org/TR/shacl/#x2.3.1-shacl-property-paths">2.3.1 in the shacl specification</a>. All possible combinations of e.g., <code>shacl:alternativePath</code>, <code>shacl:inversePath</code> or <code>shacl:inLanguage</code> in the SHACL spec can be used. When <code>shacl:alternativePath</code> is used, the order in the list will define the importance of the order when evaluating the <code>tree:Relation</code>. A wildcard in the path is limited to the <code>tree:shape</code> of the <code>tree:Collection</code>.
The result of the evaluation of the <code>tree:path</code>, is the value that must be compared to the <code>tree:value</code>.</p>
   <p>Every <code>tree:Relation</code> MAY provide a <code>tree:remainingItems</code>. A client MAY use <code>tree:remainingItems</code> to estimate the completeness of the downloaded elements to the end-user.</p>
   <p class="note" role="note"><span class="marker">Note:</span> When traversing, a client SHOULD keep a list of already visited pages, as despite this being the TREE spec, circular references and back-links are not explicitly prohibited.</p>
   <p>A <code>tree:import</code> MAY be defined in the <code>tree:Relation</code> instance. When there is a <code>tree:path</code> defined, and when the relation is flagged interesting to follow, the import link needs to be downloaded in order to find the necessary literals to be compared (it is thus already a <code>tree:ConditionalImport</code>.</p>
   <p class="note" role="note"><span class="marker">Note:</span> An example of a <code>tree:import</code> is given <a href="https://github.com/TREEcg/specification/blob/master/examples/geospatially-ordered-public-transport/first.ttl#L27">in the repository</a>.</p>
   <h3 class="heading settled" data-level="5.2" id="fallbacks"><span class="secno">5.2. </span><span class="content">Fallbacks</span><a class="self-link" href="#fallbacks"></a></h3>
   <p>When there are no <code>tree:member</code>s and/or no <code>tree:Collection</code> defined, then still a <code>tree:Relation</code> can be defined. The <code>tree:path</code> in the <code>tree:Relation</code> then refers to a pattern that can start from every triple in the page.</p>
   <p>When no <code>tree:path</code> is defined, the <code>tree:value</code> MUST be compared to all members’ triples that <em>can be compared to</em> the <code>tree:value</code> as defined by the type of the relation (or when no members or collection are defined, on every triple in the page).
When due to <code>rdfs:range</code> incompatibility, the object cannot be compared, the object will not be considered for comparison.</p>
   <p class="note" role="note"><span class="marker">Note:</span> This may enable server developers to indicate an index on all literals of the members (e.g., a prefix relation on title, description and body text) without having to indicate all of the alternative paths in the <code>tree:path</code>.</p>
   <p>The target object of a <code>tree:path</code> SHOULD be materialized in the current Node document, but when it is not, the object MAY be considered implicit on the condition both <code>tree:path</code> and <code>tree:member</code> are defined.
In contrast to <code>shacl:path</code>, a <code>tree:path</code> MAY refer to an implicit property and may not be materialized in the current response. This may break SPARQL processors that did not yet come across the object before in their query plan. However, the tree may still be useful for query processors that, for example, prioritize queries according to the user’s location, and first download nodes that are nearby the user. Therefore, the materialized location of the object is not needed. While not recommended, possible heuristics could try to infer the data, could try to fetch it through another <code>tree:Collection</code>, or retrieve it using URI dereferencing.</p>
   <h3 class="heading settled" data-level="5.3" id="relationsubclasses"><span class="secno">5.3. </span><span class="content">Specific relations</span><a class="self-link" href="#relationsubclasses"></a></h3>
   <p>When the <em>only</em> type given for a certain Relation is <code>tree:Relation</code>, then the client must dereference all of the nodes. While this may seem useless, it can be used for the same use case as a <code>hydra:PartialCollectionView</code>.</p>
   <p>For other types check the chapter on relation types in the vocabulary [](#Relation).</p>
   <h4 class="heading settled" data-level="5.3.1" id="strings"><span class="secno">5.3.1. </span><span class="content">Comparing strings</span><a class="self-link" href="#strings"></a></h4>
   <p>String values have three specific type of relations: the <code>tree:PrefixRelation</code>, the <code>tree:SubstringRelation</code> and the <code>tree:SuffixRelation</code>.</p>
   <p class="note" role="note"><span class="marker">Note:</span> We experimented with server-chosen locales such that <code>ça suffit</code> can also be found when following a <code>tree:PrefixRelation</code> with a <code>tree:value "c"</code> (which at this moment is not supported). That would require an understanding of locales, and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl#Locale_identification_and_negotiation">browser/JavaScript support for locales is too low to be useful at this point</a>.</p>
   <p>Also the comparator relations such as <code>tree:GreaterThanRelation</code> can be used.
The strings MUST then be compared according to <em>case sensitive unicode ordering</em>.</p>
   <p>When a <code>tree:path</code> is defined, mind that you also may have to check the language of the element using the property <code>shacl:inLanguage</code> More languages MAY be set.
When no language is set, all strings are compared.</p>
   <p class="note" role="note"><span class="marker">Note:</span> If you want to have one resource containing both <code>e</code> and <code>é</code> as a prefix, you will have to create multiple relations to the same <code>tree:Node</code>.</p>
   <h4 class="heading settled" data-level="5.3.2" id="named-nodes"><span class="secno">5.3.2. </span><span class="content">Comparing named nodes</span><a class="self-link" href="#named-nodes"></a></h4>
   <p>When using comparator relations such as <code>tree:GreaterThanRelation</code>, named nodes must be compared as defined in the <a href="https://www.w3.org/TR/sparql11-query/#modOrderBy">ORDER BY section of the SPARQL specification</a>.</p>
   <h4 class="heading settled" data-level="5.3.3" id="geospatial"><span class="secno">5.3.3. </span><span class="content">Comparing geospatial features</span><a class="self-link" href="#geospatial"></a></h4>
   <p>The <code>tree:GeospatiallyContainsRelation</code> is the relation than can be used to express all further members will be contained within a geospatial region defined by the WKT String in the <code>tree:value</code>.</p>
   <p>When using <code>tree:GeospatiallyContainsRelation</code>, the <code>tree:path</code> MUST refer to a literal containing a WKT string, such as <code>geosparql:asWKT</code>.</p>
   <h4 class="heading settled" data-level="5.3.4" id="time"><span class="secno">5.3.4. </span><span class="content">Comparing time literals</span><a class="self-link" href="#time"></a></h4>
   <p>When using relations such as <code>tree:LessThanRelation</code> or <code>tree:GreaterThanRelation</code>, the time literals need to be compared according to these 3 possible data types: <code>xsd:date</code>, <code>xsd:dateTime</code> or <code>xsd:dateTimeStamp</code>.</p>
   <h2 class="heading settled" data-level="6" id="searching"><span class="secno">6. </span><span class="content">Search forms</span><a class="self-link" href="#searching"></a></h2>
   <p>Searching through a TREE will allow you to immediately jump to the right <code>tree:Node</code>.
TREE relies on the <a href="http://www.hydra-cg.com/spec/latest/core/#hydra:search">Hydra search specification</a> for its search forms.
It does however extend Hydra with specific search properties (<code>hydra:IriTemplate</code>) for different types of search forms, and searches starting from a <code>tree:ViewDescription</code>, to which the search form is linked with <code>tree:search</code>.
The behaviour of the search form fully depends on the specific property, for which TREE introduces a couple of specific properties:</p>
   <h3 class="heading settled" data-level="6.1" id="xyztiles"><span class="secno">6.1. </span><span class="content">Geospatial XYZ tiles search form</span><a class="self-link" href="#xyztiles"></a></h3>
   <p>Three properties allow to specify a geospatial XYZ tiles template (also known as slippy maps).</p>
   <ol>
    <li data-md>
     <p><code>tree:longitudeTile</code> describes the X value</p>
    <li data-md>
     <p><code>tree:latitudeTile</code> descrbes the Y value</p>
    <li data-md>
     <p><code>tree:zoom</code> describes the zoom level</p>
   </ol>
   <p>All properties expect positive integers.</p>
   <div class="example" id="example-ee6e2d2e">
    <a class="self-link" href="#example-ee6e2d2e"></a> 
<pre class="language-turtle highlight"><c- g>&lt;https://tiles.openplanner.team/#LatestCollection></c-> <c- b>a</c-> <c- nn>tree</c-><c- p>:</c-><c- f>Collection</c-> <c- p>;</c->
    <c- nn>dcterms</c-><c- p>:</c-><c- f>title</c-> <c- s>"A prototype tree:Collection for Linked OpenStreetMap’s roads"</c-><c- o>@</c->en <c- p>;</c->
    <c- nn>tree</c-><c- p>:</c-><c- f>view</c-> <c- g>&lt;https://tiles.openplanner.team/planet/20201103-095900/14/8411/5485></c-> <c- p>.</c->

<c- g>&lt;https://tiles.openplanner.team/planet/20201103-095900/14/8411/5485></c-> <c- b>a</c-> <c- nn>tree</c-><c- p>:</c-><c- f>Node</c-> <c- p>;</c->
    <c- nn>tree</c-><c- p>:</c-><c- f>viewDescription</c-> <c- g>&lt;https://tiles.openplanner.team/planet/></c-> <c- p>.</c->

<c- g>&lt;https://tiles.openplanner.team/planet/></c-> <c- b>a</c-> <c- nn>tree</c-><c- p>:</c-><c- f>ViewDescription</c-> <c- p>;</c->
    <c- nn>tree</c-><c- p>:</c-><c- f>search</c-> <c- p>[</c->
        <c- b>a</c-> <c- nn>hydra</c-><c- p>:</c-><c- f>IriTemplate</c-> <c- p>;</c->
        <c- nn>hydra</c-><c- p>:</c-><c- f>template</c-> <c- s>"https://tiles.openplanner.team/planet/20201103-095900/{z}/{x}/{y}"</c-> <c- p>;</c->
        <c- nn>hydra</c-><c- p>:</c-><c- f>variableRepresentation</c-> <c- nn>hydra</c-><c- p>:</c-><c- f>BasicRepresentation</c-> <c- p>;</c->
        <c- nn>hydra</c-><c- p>:</c-><c- f>mapping</c-> <c- p>[</c->
            <c- b>a</c-> <c- nn>hydra</c-><c- p>:</c-><c- f>IriTemplateMapping</c-> <c- p>;</c->
            <c- nn>hydra</c-><c- p>:</c-><c- f>variable</c-> <c- s>"x"</c-><c- p>;</c->
            <c- nn>hydra</c-><c- p>:</c-><c- f>property</c-> <c- nn>tree</c-><c- p>:</c-><c- f>longitudeTile</c-><c- p>;</c->
            <c- nn>hydra</c-><c- p>:</c-><c- f>required</c-> <c- l>true</c->
        <c- p>],[</c->
            <c- b>a</c-> <c- nn>hydra</c-><c- p>:</c-><c- f>IriTemplateMapping</c-> <c- p>;</c->
            <c- nn>hydra</c-><c- p>:</c-><c- f>variable</c-> <c- s>"y"</c-><c- p>;</c->
            <c- nn>hydra</c-><c- p>:</c-><c- f>property</c-> <c- nn>tree</c-><c- p>:</c-><c- f>latitudeTile</c-><c- p>;</c->
            <c- nn>hydra</c-><c- p>:</c-><c- f>required</c-> <c- l>true</c->
        <c- p>],[</c->
            <c- b>a</c-> <c- nn>hydra</c-><c- p>:</c-><c- f>IriTemplateMapping</c-> <c- p>;</c->
            <c- nn>hydra</c-><c- p>:</c-><c- f>variable</c-> <c- s>"z"</c-><c- p>;</c->
            <c- nn>hydra</c-><c- p>:</c-><c- f>property</c-> <c- nn>tree</c-><c- p>:</c-><c- f>zoom</c-><c- p>;</c->
            <c- nn>hydra</c-><c- p>:</c-><c- f>required</c-> <c- l>true</c->
        <c- p>]</c->
    <c- p>]</c-> <c- p>.</c->
    
</pre>
   </div>
   <p>This search form describes a specific search form that uses a quad tree. The zoom level describes the depth, the longitudeTile and latitudeTile describe the x and y index of the fragmentation. (e.g., on zoom level 0, there’s 1 tile, on zoom level 1, there are 4 tiles, etc.).</p>
   <h3 class="heading settled" data-level="6.2" id="timesearch"><span class="secno">6.2. </span><span class="content">Searching through a list of objects ordered by time</span><a class="self-link" href="#timesearch"></a></h3>
   <p>Same as the previous example but with the predicate <code>tree:timeQuery</code> expecting an <code>xsd:dateTime</code>.
This time however, when the page itself does not exist, a redirect is doing to happen to the page containing the timestamp.
A <code>tree:path</code> can indicate the time predicate which is intended.</p>
   <div class="example" id="example-711fd17f">
    <a class="self-link" href="#example-711fd17f"></a> 
<pre class="language-turtle highlight"><c- g>&lt;https://example.org/#Collection></c-> <c- b>a</c-> <c- nn>tree</c-><c- p>:</c-><c- f>Collection</c-> <c- p>;</c->
    <c- nn>dcterms</c-><c- p>:</c-><c- f>title</c-> <c- s>"An example collection with a time search view"</c-><c- o>@</c->en <c- p>;</c->
    <c- nn>tree</c-><c- p>:</c-><c- f>view</c-> <c- g>&lt;https://example.org/Node1></c-> <c- p>.</c->

<c- g>&lt;https://example.org/Node1></c-> <c- b>a</c-> <c- nn>tree</c-><c- p>:</c-><c- f>Node</c-> <c- p>;</c->
    <c- nn>tree</c-><c- p>:</c-><c- f>viewDescription</c-> <c- g>&lt;https://example.org/#TimeSearch></c-> <c- p>.</c->

<c- g>&lt;https://example.org/#TimeSearch></c-> <c- b>a</c-> <c- nn>tree</c-><c- p>:</c-><c- f>ViewDescription</c-> <c- p>;</c->
    <c- nn>tree</c-><c- p>:</c-><c- f>search</c-> <c- p>[</c->
        <c- b>a</c-> <c- nn>hydra</c-><c- p>:</c-><c- f>IriTemplate</c-> <c- p>;</c->
        <c- nn>hydra</c-><c- p>:</c-><c- f>template</c-> <c- s>"https://example.org/{generatedAt}"</c-> <c- p>;</c->
        <c- nn>hydra</c-><c- p>:</c-><c- f>variableRepresentation</c-> <c- nn>hydra</c-><c- p>:</c-><c- f>BasicRepresentation</c-> <c- p>;</c->
        <c- nn>hydra</c-><c- p>:</c-><c- f>mapping</c-> <c- p>[</c->
            <c- b>a</c-> <c- nn>hydra</c-><c- p>:</c-><c- f>IriTemplateMapping</c-> <c- p>;</c->
            <c- nn>hydra</c-><c- p>:</c-><c- f>variable</c-> <c- s>"generatedAt"</c-><c- p>;</c->
            <c- nn>tree</c-><c- p>:</c-><c- f>path</c-> <c- nn>prov</c-><c- p>:</c-><c- f>generatedAtTime</c-><c- p>;</c->
            <c- nn>hydra</c-><c- p>:</c-><c- f>property</c-> <c- nn>tree</c-><c- p>:</c-><c- f>timeQuery</c-><c- p>;</c->
            <c- nn>hydra</c-><c- p>:</c-><c- f>required</c-> <c- l>true</c->
        <c- p>]</c->
    <c- p>]</c-> <c- p>.</c->
</pre>
   </div>
   <h2 class="heading settled" data-level="7" id="imports"><span class="secno">7. </span><span class="content">Imports</span><a class="self-link" href="#imports"></a></h2>
   <p>A <code>tree:import</code> can be defined on multiple levels. When defined as part of a <code>tree:Node</code>, this document always needs to be fetched when processing this Node.
When defined as part of the <code>tree:Relation</code>, one MUST fetch the import when the relation needs to be correctly evaluated (e.g., the resulting page contains elements without materialized WKT strings, which however can be fetched from the import).
When importing a file, no hypermedia relations will be followed from that import in order to get more data.</p>
   <p>A <code>tree:importStream</code> can also be defined for providing a pubsub interface for subscribing to real-time updates. The object SHOULD be a <a data-link-type="biblio" href="#biblio-websockets" title="WebSockets Standard">[websockets]</a> or Server-Sent Events (<a data-link-type="biblio" href="#biblio-eventsource" title="Server-Sent Events">[eventsource]</a>).</p>
   <p>Instead of <code>tree:import</code>, one can also use <code>tree:conditionalImport</code> which links to an object of the type <code>tree:ConditionalImport</code> with these properties:</p>
   <ul>
    <li data-md>
     <p><code>tree:import</code> with a link to the page to import, or a <code>tree:importStream</code> with a pubsub stream to import (optionally)</p>
    <li data-md>
     <p><code>tree:path</code> with a property path that indicates the resource that elements in the imported resource contain</p>
   </ul>
   <p class="note" role="note"><span class="marker">Note:</span> imports are powerful to keep recurring objects in a separate, more cacheable, resource.</p>
   <p>No hypermedia controls in the body MUST be interpreted in the imported resource and the object must be fully contained within that information resource.</p>
   <p>On the resources to import, Memento <a data-link-type="biblio" href="#biblio-rfc7089" title="HTTP Framework for Time-Based Access to Resource States -- Memento">[RFC7089]</a> controls MAY be provided for historic versions.</p>
   <h2 class="heading settled" data-level="8" id="compatibility"><span class="secno">8. </span><span class="content">Compatibility</span><a class="self-link" href="#compatibility"></a></h2>
   <h3 class="heading settled" data-level="8.1" id="dcat"><span class="secno">8.1. </span><span class="content">DCAT</span><a class="self-link" href="#dcat"></a></h3>
   <p><a data-link-type="biblio" href="#biblio-vocab-dcat-2" title="Data Catalog Vocabulary (DCAT) - Version 2">[VOCAB-DCAT-2]</a> is the standard for Open Data Portals by W3C. In order to find TREE compliant datasets in data portals, there SHOULD be a <code>dcat:endpointDescription</code> from the <code>dcat:DataService</code> to the entrypoint where the <code>tree:Collection</code>s and the <code>tree:ViewDescription</code>s are listed. Furthermore, there SHOULD be a <code>dct:conformsTo</code> this URI: <code>https://w3id.org/tree/specification</code>.</p>
   <h3 class="heading settled" data-level="8.2" id="hydra"><span class="secno">8.2. </span><span class="content">Hydra</span><a class="self-link" href="#hydra"></a></h3>
   <p>A <code>tree:Collection</code> is compatible with the <a href="https://www.hydra-cg.com/spec/latest/core/#collections">Hydra Collections specification</a>. However, instead of <code>hydra:view</code>, we use <code>tree:view</code> and do not link to a <code>hydra:PartialCollectionView</code> but to a <code>tree:Node</code>.
A <code>hydra:Collection</code> can thus also be extended with a <code>tree:shape</code> and <code>tree:view</code>.
When this is done, also <code>hydra:member</code> can be used instead of <code>tree:member</code>.</p>
   <p><code>hydra:totalItems</code> can be used to indicate the total amount of elements in the collection.
Hydra paging controls such as <code>hydra:next</code> and <code>hydra:previous</code> are semantically equivalent to a <code>tree:Relation</code> element that only contains a <code>tree:node</code> property.</p>
   <h3 class="heading settled" data-level="8.3" id="activitystreams"><span class="secno">8.3. </span><span class="content">Activity Streams 2.0</span><a class="self-link" href="#activitystreams"></a></h3>
   <p>A <code>tree:Collection</code> is also compatible with <a data-link-type="biblio" href="#biblio-activitystreams-core" title="Activity Streams 2.0">[activitystreams-core]</a>’s specification of <a href="https://www.w3.org/TR/activitystreams-core/#collections">paged collections</a>.
Instead of <code>dcterms:isPartOf</code>, also <code>as:partOf</code> can be used to indicate that the current page is part of the full collection.
While Hydra and TREE link to the members of the collection by using the specific collection as a subject, Activity Streams 2.0 (AS) indicates a member starting from the page URL.
Therefore, when using AS collections, a client implementation should gather the members from the <code>tree:Node</code> or <code>as:CollectionPage</code> instead.</p>
   <p><code>as:totalItems</code> can be used to indicate the total amount of elements in the collection.</p>
   <p>AS paging controls such as <code>as:next</code>and <code>as:previous</code> are semantically equivalent to a <code>tree:Relation</code> element that only contains a <code>tree:node</code> property.</p>
   <h3 class="heading settled" data-level="8.4" id="ldp"><span class="secno">8.4. </span><span class="content">LDP Containers</span><a class="self-link" href="#ldp"></a></h3>
   <p>In <a data-link-type="biblio" href="#biblio-ldp" title="Linked Data Platform 1.0">[LDP]</a>, the <code>tree:view</code> can be applied on top of the <code>ldp:Container</code> instance.
Members can be found through <code>ldp:contains</code>, and/or through the indirect <code>ldp:membershipResource</code> and <code>ldp:hasMemberRelation</code> or <code>ldp:isMemberOfRelation</code> construct.</p>
   <p>If this container is paged by the <a data-link-type="biblio" href="#biblio-ldp-paging" title="Linked Data Platform Paging 1.0">[ldp-paging]</a> (chapter 7) spec, then this MUST be ignored.</p>
   <p>If there is an ordering, this MUST be ignored by TREE clients (the relations contain all necessary information for pruning).</p>
   <h3 class="heading settled" data-level="8.5" id="shapetrees"><span class="secno">8.5. </span><span class="content">Shape trees</span><a class="self-link" href="#shapetrees"></a></h3>
   <p><a href="https://shapetrees.org/TR/specification/">The Shape Trees specification</a> is specifically built to work within existing ecosystems.
As it was conceived to interoperate with LDP, the term Container in the Shape Trees spec can also be interpreted as a <code>tree:Collection</code>.
Shape Trees can help in the source selection of what specific <code>tree:Collection</code> to pick for your goal, and may add hierarchies to a set of <code>tree:Collection</code>s.
A client MAY infer a <code>tree:shape</code> of the collection through the <code>st:validatedBy</code> property of the Shapes Tree.</p>
   <p>An example of a collection using Shape Tree terms. In this example a sensor with some observations is validated by using a <a href="http://shex.io/shex-semantics/">Shape Expressions</a> (ShEx) file.</p>
   <div class="example" id="example-fe6fed00">
    <a class="self-link" href="#example-fe6fed00"></a> 
<pre class="language-turtle highlight"><c- k>@prefix</c-> <c- nn>sosa:</c-> <c- g>&lt;http://www.w3.org/ns/sosa/></c-> <c- p>.</c->
<c- k>@prefix</c-> <c- nn>om:</c-> <c- g>&lt;http://www.ontology-of-units-of-measure.org/resource/om-2/></c-> <c- p>.</c->
<c- k>@prefix</c-> <c- nn>ldp:</c-> <c- g>&lt;http://www.w3.org/ns/ldp#></c-> <c- p>.</c->

<c- g>&lt;2021.ttl#Collection></c-> <c- b>a</c-> <c- nn>ldp</c-><c- p>:</c-><c- f>Container</c-><c- p>;</c-> 
    <c- nn>st</c-><c- p>:</c-><c- f>validatedBy</c-> <c- g>&lt;Sensor.shex#Sensor></c-><c- p>;</c->
    <c- nn>tree</c-><c- p>:</c-><c- f>member</c-> <c- g>&lt;sensor1></c-><c- p>,</c-> <c- g>&lt;sensor2></c-> <c- p>.</c->

<c- g>&lt;sensor1></c->
    <c- b>a</c-> <c- nn>sosa</c-><c- p>:</c-><c- f>Sensor</c-><c- p>;</c->
    <c- nn>sosa</c-><c- p>:</c-><c- f>madeObservation</c->
        <c- g>&lt;sensor1-observation1></c-><c- p>,</c->
        <c- g>&lt;sensor1-observation2></c-><c- p>;</c->
    <c- nn>sosa</c-><c- p>:</c-><c- f>observes</c-> <c- nn>om</c-><c- p>:</c-><c- f>Temperature</c-> <c- p>.</c->

<c- g>&lt;sensor1-observation1></c->
    <c- b>a</c-> <c- nn>sosa</c-><c- p>:</c-><c- f>Observation</c-><c- p>;</c->
    <c- nn>sosa</c-><c- p>:</c-><c- f>observedProperty</c-> <c- nn>om</c-><c- p>:</c-><c- f>Temperature</c-><c- p>;</c->
    <c- nn>sosa</c-><c- p>:</c-><c- f>madeBySensor</c-> <c- g>&lt;sensor1></c-><c- p>;</c->
    <c- nn>sosa</c-><c- p>:</c-><c- f>hasResult</c-> <c- g>&lt;result1></c-><c- p>;</c->
    <c- nn>sosa</c-><c- p>:</c-><c- f>resultTime</c-> <c- s>"2020-08-25T07:05:31Z"</c-><c- p>^^</c-><c- nn>xsd</c-><c- p>:</c-><c- f>dateTime</c-> <c- p>.</c->

<c- g>&lt;result1></c-> <c- b>a</c-> <c- nn>om</c-><c- p>:</c-><c- f>Measure</c-><c- p>;</c-> 
    <c- nn>om</c-><c- p>:</c-><c- f>hasValue</c-> <c- s>"22"</c-><c- p>^^</c-><c- nn>xsd</c-><c- p>:</c-><c- f>float</c-><c- p>;</c-> 
    <c- nn>om</c-><c- p>:</c-><c- f>hasUnit</c-> <c- nn>om</c-><c- p>:</c-><c- f>degreeCelsius</c-> <c- p>.</c->

<c- g>&lt;sensor1-observation2></c->
    <c- b>a</c-> <c- nn>sosa</c-><c- p>:</c-><c- f>Observation</c-><c- p>;</c->
    <c- nn>sosa</c-><c- p>:</c-><c- f>observedProperty</c-> <c- nn>om</c-><c- p>:</c-><c- f>Temperature</c-><c- p>;</c->
    <c- nn>sosa</c-><c- p>:</c-><c- f>madeBySensor</c-> <c- g>&lt;sensor1></c-><c- p>;</c->
    <c- nn>sosa</c-><c- p>:</c-><c- f>hasResult</c-> <c- g>&lt;result2></c-><c- p>;</c->
    <c- nn>sosa</c-><c- p>:</c-><c- f>resultTime</c-> <c- s>"2020-08-25T07:05:32Z"</c-><c- p>^^</c-><c- nn>xsd</c-><c- p>:</c-><c- f>dateTime</c-> <c- p>.</c->

<c- g>&lt;result2></c-> <c- b>a</c-> <c- nn>om</c-><c- p>:</c-><c- f>Measure</c-><c- p>;</c-> 
    <c- nn>om</c-><c- p>:</c-><c- f>hasValue</c-> <c- s>"22"</c-><c- p>^^</c-><c- nn>xsd</c-><c- p>:</c-><c- f>float</c-><c- p>;</c-> 
    <c- nn>om</c-><c- p>:</c-><c- f>hasUnit</c-> <c- nn>om</c-><c- p>:</c-><c- f>degreeCelsius</c-> <c- p>.</c->

<c- g>&lt;sensor2></c->
    <c- b>a</c-> <c- nn>sosa</c-><c- p>:</c-><c- f>Sensor</c-><c- p>;</c->
    <c- nn>sosa</c-><c- p>:</c-><c- f>observes</c-> <c- nn>om</c-><c- p>:</c-><c- f>Temperature</c-> <c- p>.</c->
</pre>
    <p>And its corresponding ShEx file (called Sensor.shex)</p>
<pre class="language-shex highlight"><c- k>PREFIX</c-> <c- nn>sosa</c-><c- p>:</c-> <c- nl>&lt;http://www.w3.org/ns/sosa/></c->
<c- k>PREFIX</c-> <c- nn>xsd</c-><c- p>:</c-> <c- nl>&lt;http://www.w3.org/2001/XMLSchema#></c->
<c- k>PREFIX</c-> <c- nn>om</c-><c- p>:</c-> <c- nl>&lt;http://www.ontology-of-units-of-measure.org/resource/om-2/></c->
<c- k>PREFIX</c-> <c- nn>rdfs</c-><c- p>:</c-> <c- nl>&lt;http://www.w3.org/2000/01/rdf-schema#></c->

<c- nl>&lt;#Sensor></c-> <c- p>{</c->
    <c- k>a</c-> <c- p>[</c-><c- nn>sosa</c-><c- p>:</c-><c- f>Sensor</c-><c- p>]</c-> <c- p>;</c->
    <c- nn>sosa</c-><c- p>:</c-><c- f>observes</c-> <c- p>[</c-><c- nn>om</c-><c- p>:</c-><c- f>Temperature</c-><c- p>]</c->  <c- p>;</c-> 
    <c- nn>sosa</c-><c- p>:</c-><c- f>madeObservation</c-> <c- o>@</c-><c- nl>&lt;#TemperatureObservation></c-> <c- o>*</c-> 
<c- p>}</c->

<c- nl>&lt;#TemperatureObservation></c-> <c- p>{</c->
    <c- k>a</c-> <c- p>[</c-><c- nn>sosa</c-><c- p>:</c-><c- f>Observation</c-><c- p>]</c-> <c- p>;</c->
    <c- nn>sosa</c-><c- p>:</c-><c- f>resultTime</c-> <c- nn>xsd</c-><c- p>:</c-><c- f>dateTime</c-> <c- p>;</c->
    <c- nn>sosa</c-><c- p>:</c-><c- f>madeBySensor</c-> <c- o>@</c-><c- nl>&lt;#Sensor></c-> <c- o>?</c-> <c- p>;</c->
    <c- nn>sosa</c-><c- p>:</c-><c- f>observedProperty</c-> <c- p>[</c-><c- nn>om</c-><c- p>:</c-><c- f>Temperature</c-><c- p>];</c->
    <c- nn>sosa</c-><c- p>:</c-><c- f>hasResult</c-> <c- o>@</c-><c- nl>&lt;#TemperatureResult></c-> 
<c- p>}</c->

<c- nl>&lt;#TemperatureResult></c-> <c- p>{</c-> 
    <c- k>a</c-> <c- p>[</c-><c- nn>om</c-><c- p>:</c-><c- f>Measure</c-><c- p>];</c->
    <c- nn>om</c-><c- p>:</c-><c- f>hasValue</c-> <c- nn>xsd</c-><c- p>:</c-><c- f>float</c-> <c- p>;</c->
    <c- nn>om</c-><c- p>:</c-><c- f>hasUnit</c-> <c- p>[</c-><c- nn>om</c-><c- p>:</c-><c- f>degreeCelsius</c-><c- p>]</c->
<c- p>}</c->
</pre>
   </div>
   <h2 class="heading settled" data-level="9" id="vocabulary"><span class="secno">9. </span><span class="content">Vocabulary</span><a class="self-link" href="#vocabulary"></a></h2>
   <p><strong>Namespace</strong>: <code>https://w3id.org/tree#</code></p>
   <p>Prefixes:</p>
<pre class="language-turtle highlight"><c- k>@prefix</c-> <c- nn>tree:</c-> <c- g>&lt;https://w3id.org/tree#></c-><c- p>.</c->
<c- k>@prefix</c-> <c- nn>hydra:</c-> <c- g>&lt;http://www.w3.org/ns/hydra/core#></c-><c- p>.</c->
<c- k>@prefix</c-> <c- nn>rdf:</c-> <c- g>&lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#></c-><c- p>.</c->
<c- k>@prefix</c-> <c- nn>sh:</c-> <c- g>&lt;http://www.w3.org/ns/shacl#></c-> <c- p>.</c->
<c- k>@prefix</c-> <c- nn>xsd:</c-> <c- g>&lt;http://www.w3.org/2001/XMLSchema#></c-> <c- p>.</c->
</pre>
   <h3 class="heading settled" data-level="9.1" id="classes"><span class="secno">9.1. </span><span class="content">Classes</span><a class="self-link" href="#classes"></a></h3>
   <h4 class="heading settled" data-level="9.1.1" id="collection"><span class="secno">9.1.1. </span><span class="content">tree:Collection</span><a class="self-link" href="#collection"></a></h4>
   <p>A collection has members that may adhere to a certain shape.</p>
   <h4 class="heading settled" data-level="9.1.2" id="Node"><span class="secno">9.1.2. </span><span class="content">tree:Node</span><a class="self-link" href="#Node"></a></h4>
   <p>A <code>tree:Node</code> is a node that may contain links to other dereferenceable resources that lead to a full overview of a <code>tree:Collection</code>.</p>
   <h4 class="heading settled" data-level="9.1.3" id="Relation"><span class="secno">9.1.3. </span><span class="content">tree:Relation</span><a class="self-link" href="#Relation"></a></h4>
   <p>An entity that describes a relation between two <code>tree:Nodes</code>.</p>
   <p>The <code>tree:Relation</code> has specific sub-classes that implement a more specific type between the values. These types are described in the ontology (all classes are <code>rdf:subClassOf</code> <code>tree:Relation</code>):</p>
   <ul>
    <li data-md>
     <p>String, Date or Number comparison:</p>
     <ul>
      <li data-md>
       <p><code>tree:PrefixRelation</code> — All elements in the related node have this prefix</p>
      <li data-md>
       <p><code>tree:SubstringRelation</code> — All elements in the related node have this substring</p>
      <li data-md>
       <p><code>tree:SuffixRelation</code> — All members of this related node end with this suffix</p>
      <li data-md>
       <p><code>tree:GreaterThanRelation</code> — the related Node’s members are greater than the value. For string comparison, this relation can refer to a comparison configuration</p>
      <li data-md>
       <p><code>tree:GreaterThanOrEqualToRelation</code> — similar to ↑</p>
      <li data-md>
       <p><code>tree:LessThanRelation</code></p>
      <li data-md>
       <p><code>tree:LessThanOrEqualToRelation</code></p>
      <li data-md>
       <p><code>tree:EqualToRelation</code></p>
      <li data-md>
       <p><code>tree:NotEqualToRelation</code></p>
     </ul>
    <li data-md>
     <p>Geo-spatial comparison (requires the node values to be WKT-strings):</p>
     <ul>
      <li data-md>
       <p><code>tree:GeospatiallyContainsRelation</code> — (for semantics, see the <a href="https://en.wikipedia.org/wiki/DE-9IM">DE-9IM wikipedia page</a>)</p>
     </ul>
   </ul>
   <h4 class="heading settled" data-level="9.1.4" id="ConditionalImport"><span class="secno">9.1.4. </span><span class="content">tree:ConditionalImport</span><a class="self-link" href="#ConditionalImport"></a></h4>
   <p>A class to import a file or a stream based on a <code>tree:path</code> of properties. This way it can import the necessary data for complying to the SHACL shape, or evaluating a relation type.</p>
   <h4 class="heading settled" data-level="9.1.5" id="ViewDescription"><span class="secno">9.1.5. </span><span class="content">tree:ViewDescription</span><a class="self-link" href="#ViewDescription"></a></h4>
   <p>Describes a specific TREE structure on top of the <code>tree:Collection</code>.</p>
   <h3 class="heading settled" data-level="9.2" id="properties"><span class="secno">9.2. </span><span class="content">Properties</span><a class="self-link" href="#properties"></a></h3>
   <h4 class="heading settled" data-level="9.2.1" id="relation"><span class="secno">9.2.1. </span><span class="content">tree:relation</span><a class="self-link" href="#relation"></a></h4>
   <p>Links a node to a relation</p>
   <p><strong>Domain</strong>: <code>tree:Node</code></p>
   <p><strong>Range</strong>: <code>tree:Relation</code></p>
   <h4 class="heading settled" data-level="9.2.2" id="remainingItems"><span class="secno">9.2.2. </span><span class="content">tree:remainingItems</span><a class="self-link" href="#remainingItems"></a></h4>
   <p>Remaining number of items of this node, the items in its children included.</p>
   <p><strong>Domain</strong>: <code>tree:Relation</code></p>
   <p><strong>Range</strong>: <code>xsd:integer</code></p>
   <h4 class="heading settled" data-level="9.2.3" id="node"><span class="secno">9.2.3. </span><span class="content">tree:node</span><a class="self-link" href="#node"></a></h4>
   <p>The URL to be derefenced when this relation cannot be pruned.</p>
   <p><strong>Domain</strong>: <code>tree:Relation</code></p>
   <p><strong>Range</strong>: <code>tree:Node</code></p>
   <h4 class="heading settled" data-level="9.2.4" id="value"><span class="secno">9.2.4. </span><span class="content">tree:value</span><a class="self-link" href="#value"></a></h4>
   <p>The contextual value of this node: may contain e.g., a WKT-string with the bound of a rectangle, may contain a string, an integer, or even link to another resource where clear comparison rules apply.</p>
   <p><strong>Domain</strong>: <code>tree:Relation</code></p>
   <h4 class="heading settled" data-level="9.2.5" id="path"><span class="secno">9.2.5. </span><span class="content">tree:path</span><a class="self-link" href="#path"></a></h4>
   <p>A property path, <a href="https://www.w3.org/TR/shacl/#x2.3.1-shacl-property-paths">as defined by SHACL</a>, that indicates what resource the <code>tree:value</code> affects.</p>
   <p>See [](#relations)</p>
   <p><strong>Domain</strong>: <code>tree:Relation</code></p>
   <h4 class="heading settled" data-level="9.2.6" id="view"><span class="secno">9.2.6. </span><span class="content">tree:view</span><a class="self-link" href="#view"></a></h4>
   <p>Links the collection to a <code>tree:Node</code> from which all members can be found. If only a part of the collection’s members can be found from that point on, only use <code>dcterms:isPartOf</code> or <code>void:subset</code>.</p>
   <p><strong>Domain</strong>: <code>tree:Collection</code></p>
   <p><strong>Range</strong>: <code>tree:Node</code></p>
   <h4 class="heading settled" data-level="9.2.7" id="search"><span class="secno">9.2.7. </span><span class="content">tree:search</span><a class="self-link" href="#search"></a></h4>
   <p>Links a <code>tree:Node</code> to a <code>hydra:IriTemplate</code>. The search form will search the remaining items of the node.</p>
   <p><strong>Domain</strong>: <code>tree:Node</code></p>
   <p><strong>Range</strong>: <code>hydra:IriTemplate</code></p>
   <h4 class="heading settled" data-level="9.2.8" id="shape"><span class="secno">9.2.8. </span><span class="content">tree:shape</span><a class="self-link" href="#shape"></a></h4>
   <p>The SHACL shape the members of the collection adhere to.</p>
   <p><strong>Domain</strong>: <code>tree:Collection</code></p>
   <p><strong>Range</strong>: <code>sh:NodeShape</code></p>
   <h4 class="heading settled" data-level="9.2.9" id="member"><span class="secno">9.2.9. </span><span class="content">tree:member</span><a class="self-link" href="#member"></a></h4>
   <p>Links to the collection’s items that are the <code>sh:targetNode</code>s of the SHACL shape defined with <code>tree:shape</code>.</p>
   <p><strong>Domain</strong>: <code>tree:Collection</code></p>
   <h4 class="heading settled" data-level="9.2.10" id="import"><span class="secno">9.2.10. </span><span class="content">tree:import</span><a class="self-link" href="#import"></a></h4>
   <p>Imports a document containing triples needed for complying to the SHACL shape, or for evaluating the relation.</p>
   <h4 class="heading settled" data-level="9.2.11" id="conditionalImport"><span class="secno">9.2.11. </span><span class="content">tree:conditionalImport</span><a class="self-link" href="#conditionalImport"></a></h4>
   <p>Imports a document only when the client is interesting in a specific <code>tree:path</code>.</p>
   <h4 class="heading settled" data-level="9.2.12" id="zoom"><span class="secno">9.2.12. </span><span class="content">tree:zoom</span><a class="self-link" href="#zoom"></a></h4>
   <p>A search form parameter: the zoom level of the tile cfr. OSM convention.</p>
   <p>As defined by <a href="https://wiki.openstreetmap.org/wiki/Slippy_map_tilenames">Slippy Map Tilenames in OpenStreetMap</a></p>
   <h4 class="heading settled" data-level="9.2.13" id="longitudeTile"><span class="secno">9.2.13. </span><span class="content">tree:longitudeTile</span><a class="self-link" href="#longitudeTile"></a></h4>
   <p>A search form parameter: the X tile number from longitude cfr. OSM convention.</p>
   <p>As defined by <a href="https://wiki.openstreetmap.org/wiki/Slippy_map_tilenames">Slippy Map Tilenames in OpenStreetMap</a></p>
   <h4 class="heading settled" data-level="9.2.14" id="latitudeTile"><span class="secno">9.2.14. </span><span class="content">tree:latitudeTile</span><a class="self-link" href="#latitudeTile"></a></h4>
   <p>A search form parameter: the Y tile number from latitude cfr. OSM convention.</p>
   <p>As defined by <a href="https://wiki.openstreetmap.org/wiki/Slippy_map_tilenames">Slippy Map Tilenames in OpenStreetMap</a></p>
   <h4 class="heading settled" data-level="9.2.15" id="timeQuery"><span class="secno">9.2.15. </span><span class="content">tree:timeQuery</span><a class="self-link" href="#timeQuery"></a></h4>
   <p>A search form parameter: accompagnied by a <code>tree:path</code>, it indicates the property on which a time search can be done</p>
   <h4 class="heading settled" data-level="9.2.16" id="viewDescription"><span class="secno">9.2.16. </span><span class="content">tree:viewDescription</span><a class="self-link" href="#viewDescription"></a></h4>
   <p>Links together a tree:Node with its description of this TREE structure.</p>
   <p><strong>Domain</strong>: <code>tree:Node</code></p>
   <p><strong>Range</strong>: <code>tree:ViewDescription</code></p>
  </main>
  <div data-fill-with="conformance">
   <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content">Conformance</span><a class="self-link" href="#w3c-conformance"></a></h2>
   <h3 class="no-ref no-num heading settled" id="w3c-conventions"><span class="content">Document conventions</span><a class="self-link" href="#w3c-conventions"></a></h3>
   <p>Conformance requirements are expressed
    with a combination of descriptive assertions
    and RFC 2119 terminology.
    The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL”
    in the normative parts of this document
    are to be interpreted as described in RFC 2119.
    However, for readability,
    these words do not appear in all uppercase letters in this specification. </p>
   <p>All of the text of this specification is normative
    except sections explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a> </p>
   <p>Examples in this specification are introduced with the words “for example”
    or are set apart from the normative text
    with <code>class="example"</code>,
    like this: </p>
   <div class="example" id="w3c-example">
    <a class="self-link" href="#w3c-example"></a> 
    <p>This is an example of an informative example. </p>
   </div>
   <p>Informative notes begin with the word “Note”
    and are set apart from the normative text
    with <code>class="note"</code>,
    like this: </p>
   <p class="note" role="note">Note, this is an informative note.</p>
  </div>
<script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-activitystreams-core">[ACTIVITYSTREAMS-CORE]
   <dd>James Snell; Evan Prodromou. <a href="https://w3c.github.io/activitystreams/core/"><cite>Activity Streams 2.0</cite></a>. URL: <a href="https://w3c.github.io/activitystreams/core/">https://w3c.github.io/activitystreams/core/</a>
   <dt id="biblio-cbd">[CBD]
   <dd>Patrick Stickler, Nokia. <a href="https://www.w3.org/Submission/CBD/"><cite>CBD - Concise Bounded Description</cite></a>. 3 June 2005. W3C Member Submission. URL: <a href="https://www.w3.org/Submission/CBD/">https://www.w3.org/Submission/CBD/</a>
   <dt id="biblio-eventsource">[EVENTSOURCE]
   <dd>Ian Hickson. <a href="https://html.spec.whatwg.org/multipage/server-sent-events.html"><cite>Server-Sent Events</cite></a>. URL: <a href="https://html.spec.whatwg.org/multipage/server-sent-events.html">https://html.spec.whatwg.org/multipage/server-sent-events.html</a>
   <dt id="biblio-ldp">[LDP]
   <dd>Steve Speicher; John Arwe; Ashok Malhotra. <a href="https://www.w3.org/2012/ldp/hg/ldp.html"><cite>Linked Data Platform 1.0</cite></a>. URL: <a href="https://www.w3.org/2012/ldp/hg/ldp.html">https://www.w3.org/2012/ldp/hg/ldp.html</a>
   <dt id="biblio-ldp-paging">[LDP-PAGING]
   <dd>Steve Speicher; John Arwe; Ashok Malhotra. <a href="https://www.w3.org/2012/ldp/hg/ldp-paging.html"><cite>Linked Data Platform Paging 1.0</cite></a>. URL: <a href="https://www.w3.org/2012/ldp/hg/ldp-paging.html">https://www.w3.org/2012/ldp/hg/ldp-paging.html</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
   <dt id="biblio-rfc7089">[RFC7089]
   <dd>H. Van de Sompel; M. Nelson; R. Sanderson. <a href="https://www.rfc-editor.org/rfc/rfc7089"><cite>HTTP Framework for Time-Based Access to Resource States -- Memento</cite></a>. December 2013. Informational. URL: <a href="https://www.rfc-editor.org/rfc/rfc7089">https://www.rfc-editor.org/rfc/rfc7089</a>
   <dt id="biblio-shacl">[SHACL]
   <dd>Holger Knublauch; Dimitris Kontokostas. <a href="https://w3c.github.io/data-shapes/shacl/"><cite>Shapes Constraint Language (SHACL)</cite></a>. URL: <a href="https://w3c.github.io/data-shapes/shacl/">https://w3c.github.io/data-shapes/shacl/</a>
   <dt id="biblio-vocab-dcat-2">[VOCAB-DCAT-2]
   <dd>Riccardo Albertoni; et al. <a href="https://w3c.github.io/dxwg/dcat/"><cite>Data Catalog Vocabulary (DCAT) - Version 2</cite></a>. URL: <a href="https://w3c.github.io/dxwg/dcat/">https://w3c.github.io/dxwg/dcat/</a>
   <dt id="biblio-vocab-dcat-3">[VOCAB-DCAT-3]
   <dd>Simon Cox; et al. <a href="https://w3c.github.io/dxwg/dcat/"><cite>Data Catalog Vocabulary (DCAT) - Version 3</cite></a>. URL: <a href="https://w3c.github.io/dxwg/dcat/">https://w3c.github.io/dxwg/dcat/</a>
   <dt id="biblio-websockets">[WEBSOCKETS]
   <dd>Adam Rice. <a href="https://websockets.spec.whatwg.org/"><cite>WebSockets Standard</cite></a>. Living Standard. URL: <a href="https://websockets.spec.whatwg.org/">https://websockets.spec.whatwg.org/</a>
  </dl>